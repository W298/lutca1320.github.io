---
title: A* Algorithm - Pathfinding
author: RUKA SPROUT
date: 2020-10-28 22:30:00 +0900
categories: [Algorithm]
tags: [programming, pathfinding]
---

![demons](https://i.imgur.com/7FG19y6.gif)


---


### 개요
`A*` 알고리즘은 길찾기 (Pathfinding) 에 자주 사용되는 알고리즘이다. `A*` 알고리즘은 다익스트라 (Dijkstra) 알고리즘의 업드레이드 버젼이라고 생각하면 쉽다.

`A*` 는 다익스트라 알고리즘처럼 최단 거리를 보장하지는 없지만, 검색 속도가 빠르다.

위의 예시 경로를 탐색하는 방법을 하나씩 확인함으로써 알고리즘을 설명해 보겠다.


---


### 개념 설명

아래 그림에서 보듯이 출발 노드와 도착 노드가 이미 정해져 있다. `A*` 알고리즘은 항상 도착 노드가 존재해야 한다.

![a 00](https://i.imgur.com/9HMPNPf.png)

#### 1. FGH 값

각 노드들에 숫자 3개가 적혀져 있는데, 이는 다음과 같은 의미를 가진다.

![fgh](https://i.imgur.com/qpTyg6h.png)

- **G 값은 출발 노드부터 현재 노드까지의 경로의 길이**다. 그렇기 떄문에 출발 노드의 G 값은 0이 된다.
- **H (휴리스틱 함수) 값은 현재 노드에서 도착 노드까지의 '예상 경로' 길이**다. '예상 경로' 이기 떄문에 이는 추정으로만 구할 수 있는데, **장애물은 고려하지 않고 계산**한다. 방법은 다음과 같이 생각해볼 수 있다.
    - 유클리드 거리로 계산 : 실제 두 노드의 좌표의 거리를 계산한다.
    - 인덱스 거리로 계산 : 두 노드의 인덱스(i, j) 차이를 이용해 거리를 계산한다.

![index](https://i.imgur.com/ITPirx7.png)

위 그림은 인덱스 거리로 계산하는 방법을 보인 것인데,

- 한 칸을 이동 : 10
- 대각선으로 이동 : 14

으로 정의한다면, `58 = 10 * 3 + 14 * 2` 와 같이 H 값을 구할 수 있다. 이를 코드로 구현하는 법은 나중에 따로 다루도록 하겠다.

#### 2. OPEN, CLOSED 리스트

위 그림에서 보면, 출발 노드의 색깔이 초록색인 것을 확인할 수 있다. 이는 OPEN 리스트에 추가되어 있는 것을 의미하는데, 이는 다음과 같은 의미를 가지고 있다.

- **OPEN 은 '탐색 되어져야 하는 노드들의 리스트'** (초록색)
- **CLOSED 는 '이미 탐색된 노드들의 리스트'** (빨간색)

`A*` 알고리즘은 OPEN 리스트에서 노드를 꺼내 적절한 노드를 CLOSED 리스트에 넣는 식으로 작동한다. 이는 아래에서 예시로 설명하겠다.

### 어떻게 작동하는가?

자, 그럼 이제 실제 어떤 절차로 경로를 구하는지 하나씩 살펴보자.

#### 1. 출발 노드를 OPEN 리스트에 넣는다.

출발 노드부터 탐색할 것이기 때문에 출발 노드를 OPEN 리스트에 넣는다.

![a 00](https://i.imgur.com/9HMPNPf.png)

#### 2. 주변 노드들을 탐색한다.

주변에 있는 인접한 노드들을 OPEN 리스트에 넣고 FGH 값을 업데이트한다. 이때 출발 노드는 탐색되었으므로 CLOSED 노드에 넣는다.

![a 10](https://i.imgur.com/SERTFK3.png)

그다음 주변 노드들 중 어느 노드를 선택해 탐색할지 정해야 한다.

- 먼저 F 값이 작은 노드를 선택한다.
- 만약 위와 같이 같은 F 값을 가진다면, H 값 (도착지까지의 예상 경로) 이 작은 노드를 선택한다.

그렇기 떄문에 위 상황에서 오른쪽 위에 있는 노드를 탐색하게 된다.

#### 3. 반복

오른쪽 위 노드의 주변 8개 노드를 탐색한다.

- 일반적으로 OPEN 리스트, CLOSED 리스트에 이미 등록된 노드는 값을 업데이트 하지 않는다.

![a 23](https://i.imgur.com/dW6ixZ9.png)

여기에서도 초록색으로 칠해진 주변 노드들 중에서 F값이 가장 작은 노드를 선택하면 된다. 오른쪽 노드와 아래 노드가 있는데, 오른쪽 노드의 H 값이 더 작기 때문에 오른쪽 노드를 선택해준다.

![a 36](https://i.imgur.com/ECY7l2U.png)

여기에서는 왼쪽 아래 노드의 F값이 가장 작으므로 이를 선택해준다.

#### 4. 반복 (업데이트 필요)
